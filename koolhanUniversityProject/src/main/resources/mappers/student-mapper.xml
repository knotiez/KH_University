<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "mybatis-3-mapper.dtd" >
<mapper namespace="studentMapper">

	<resultMap type="Student" id="studentResult">
		<result column="student_no" property="studentNo"/>
		<result column="student_id" property="studentId"/>
		<result column="student_pwd" property="studentPwd"/>
		<result column="student_name" property="studentName"/>
		<result column="student_ssn" property="studentSsn"/>
		<result column="s_phone" property="sPhone"/>
		<result column="s_email" property="sEmail"/>
		<result column="a_address" property="sAddress"/>
		<result column="s_status" property="sStatus"/>
		<result column="enroll_date" property="enrollDate"/>
		<result column="absence_date" property="absenceDate"/>
		<result column="grad_date" property="gradDate"/>
	</resultMap>
	
	
	<resultMap id="courseResult" type="Course">
		<result column="course_no" property="courseNo"/>
		<result column="class_num" property="classNum"/>
		<result column="student_id" property="studentId"/>
		<result column="course_year" property="courseYear"/>
		<result column="course_semester" property="courseSemester"/>
		<result column="class_grade" property="classGrade"/>
		<result column="class_room" property="classRoom"/>
		<result column="class_time" property="classTime"/>
		<result column="class_name" property="className"/>
		<result column="class_score" property="classScore"/>
	</resultMap>

<select id="loginStudent" resultMap="studentResult">
	select 
       student_no
     , student_id
     , student_pwd
     , student_name
     , student_ssn
     , s_phone
     , s_email
     , s_address
     , enroll_date
     , absence_date
     , grad_date
  from student
 where student_id = #{studentId}
   and s_status = 'Y'
</select>

<select id="selectChkStudent" resultMap="studentResult">
	select 
	       *
	  from student
	 where s_email = #{email}
</select>

<update id="changePwd" parameterType="map">
    update student
    set student_pwd = #{userPwd}
    where student_id = #{memberId}
</update>

<select id="selectCourseList" resultMap="courseResult">
	select
	       course_no
	     , class_num
	     , class_grade
	     , course_semester
	     , course_year
	     , class_name
	     , class_room
	     , class_time
	     , class_score
	  from course
	  join class using (class_num)
	 where student_id = #{studentId}
	   and course_year = '2024'
</select>

<select id="searchCourse" resultMap="courseResult">
	select
	       course_no
	     , class_num
	     , class_grade
	     , course_semester
	     , class_name
	     , class_room
	     , class_time
	     , class_score
	  from course
	  join class using (class_num)
	 where course_year = 2024
       and class_num = #{courseNum}
</select>

	
</mapper>