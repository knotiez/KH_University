<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "mybatis-3-mapper.dtd" >
<mapper namespace="tuitionMapper">

	<resultMap type="TuitionStudent" id="tuitionResult">
		<result column="tt_no" property="ttNo"/>
		<result column="student_no" property="studentNo"/>
		<result column="ts_year" property="termNo"/>
		<result column="tuition" property="tuition"/>
		<result column="scholarship" property="scholarship"/>
		<result column="student_id" property="studentId"/>	
	</resultMap>
	
	<resultMap type="TuitionPayment" id="tuitionPaymentResult">
		<result column="tp_no" property="tpNo"/>
		<result column="tt_no" property="refTuitionNo"/>
		<result column="tp_date" property="tpDate"/>
	</resultMap>
	
<!-- 	<resultMap type="AdminTuitionMake" id="adminTuitionResult">
		<result column="tt_no" property="ttNo" />
		<result column="tb_open" property="tbOpen" />
		<result column="tb_close" property="tbClose" />
		<result column="tb_date" property="tbDate" />
		<result column="tb_price" property="tbPrice" />
		<result column="total_price" property="totalPrice" />
		<result column="tb_status" property="tbStatus" />
	</resultMap> -->
	
	<resultMap type="AdminTuitionMake" id="adminTuitionResult">
		<result column="tt_no"></result>
		<result column="tb_opne"></result>
		<result column="tb_close"></result>
		<result column="tb_insert"></result>
		<result column="tb_update"></result>
		<result column="tb_price"></result>
		<result column="tb_semester"></result>
	</resultMap>
	

	
	<select id="tuitionBillForm" resultMap="tuitionResult">
		SELECT 
		       t.tt_no
		     , t.student_no
		     , t.ts_year
		     , t.tuition
		     , t.scholarship
		     , tp.tp_no
		     , tp.tp_date
		FROM tuition_student t
		JOIN tuition_payment tp on (t.tt_no = tp.tt_no)
		WHERE t.STUDENT_ID = #{studentId}
	</select>
	
	<insert id="insertTuitionPay">
    insert 
      into tuition_payment
	  (
	    tp_no
	  , tt_no
	  , tp_date
	  )
	  values
	  (
	    seq_tpno.nextVAL
	  , #{ttNo}
	  , SYSDATE
	  )
	</insert>
	
<!--  	<select id="tuitionMakeForm" resultMap="adminTuitionResult">
		SELECT
			   student_no
		     , s.student_id
		     , s.student_name
		     , tt_no
		     , tb.tb_price
		     , t.scholarship
		     , tb.tb_open
		     , tb.tb_close	     
		  FROM student s
		  JOIN tuition_student t USING (student_no)
		  JOIN tuition_bill tb USING (tt_no)
		  WHERE s.student_id = #{ search }
	</select> -->
	
	 	<select id="tuitionMakeForm" resultMap="adminTuitionResult">
		SELECT
			 tt_no
		     , tb.tb_open
		     , tb.tb_close
		     , tb_insert
		     , tb_update
		     , tb_price
		     , tb_semester	     
		  FROM tuition_bill t
	</select>
	
	
	
	
	
</mapper>